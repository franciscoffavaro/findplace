{% load staticfiles %}


<html lang="pt-br" ng-app="localdescmobile">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Guia RT - O Comércio local a seu alcance!</title>

    <script src="{% static 'js/angular.js' %}"></script>
    <script src="{% static 'js/ie-emulation-modes-warning.js' %}"></script>
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/angular-messages.js' %}"></script>
    <script src="{% static 'lib/bootstrap/js/bootstrap.min.js' %}"></script>


    <link rel="stylesheet" href="{% static 'lib/bootstrap/css/bootstrap.min.css' %}">
    <link href="{% static 'css/ie10-viewport-bug-workaround.css' %}" rel="stylesheet">
    <link href="{% static 'css/signin.css' %}" rel="stylesheet">
    <link href="{% static 'lib/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet">


<style type="text/css">

      .estrelas{
        font-size:2em;
        cursor: pointer;
      }
      .estrelas input[type=radio] {
        display: none;
      }
      .estrelas label i.fa:before {
        content:'\f005';
        color: #FC0;
      }
      .estrelas input[type=radio]:checked ~ label i.fa:before {
        color: #CCC;
      }
    </style>


    <script>
      angular.module("localdescmobile", ["ngMessages"]);
      angular.module("localdescmobile").controller("localdescmobileCtrl", function ($scope, uppercaseFilter){
         $.getJSON('/local/json', function(data) {

            $scope.locais=data;
            $scope.id={{localid}};
            $scope.local=$.grep($scope.locais, function(e){ return e.pk == $scope.id; });
            $scope.local=$scope.local[0];



          });
          $.getJSON('/local/comjson', function(data2) {
             console.log(data2);
             $scope.comentarios=data2;
             var x=0;
             var contador=0;
             for (var prop in data2) {
               if(data2[prop].locais==3){var x = x+(data2[prop].avaliacao);contador++;}

              console.log("obj." + prop + " = " + data2[prop].avaliacao);
              console.log(x);

              }
              $scope.md=(x/contador);
                console.log($scope.md);




           });



      });

    </script>

</head>
<body ng-controller="localdescmobileCtrl">


<div class="container">

    <section id="singup_section">
      <div class="container-fluid" >
        <div class="row" >
{% verbatim %}


          <div class="col-sm-12 col-md-12"  style="margin-top: 50px;">
            <div class="thumbnail">
              <h2 id="h2" style="text-align: center;">{{local.titulo_local}}</h2>
              <img id=box-image src={{local.imagem}} alt="Logo Estabelecimento">
                <div class="caption">


                  <h3 class="text-center"> Descrição:</h3>
                  <p id="p" style="text-align: center">{{local.descricao}}</p><br/><br/>
                  <h4 style="text-align: center; "> Média de Avaliações: {{md}} </h4>
                </div>


{% endverbatim %}

{% block section %}

                <form action="" method="POST" style="text-align:">
                {% csrf_token %}
                  <div class="form-group">
                    {{ form.locais.errors}}
                    <label class="col-md-4 control-label" for="Autor">Estabelecimento</label>

                    {{ form.locais }}

                  </div>
                  <div class="form-group">
                    {{ form.nome.errors}}
                    <label class="col-md-4 control-label" for="Autor">Nome</label>

                    {{ form.nome }}

                  </div>
                  <div class="form-group">
                    {{ form.comentario.errors}}
                    <label class="col-md-4 control-label" for="Autor">Comentario</label>

                    {{ form.comentario }}

                  </div>
                  <div class="form-group">
                    {{ form.avaliacao.errors}}
                    <label class="col-md-4 control-label" for="Autor">Avaliação:</label>

                    {{ form.avaliacao }}

                  </div>






          <div class="col-md-12 text-center">
            <button type="submit" class="btn btn-primary">Enviar</button>
            <a href="#" class="btn btn-default">Cancelar</a>
        </div>


      </form>
      {% endblock %}

              </div>
            </div>
            </div>

      </section>


<div ng-include="'{% static 'ajax/navbar.html' %}'"></div>
<br/>






<div ng-include="'{% static 'ajax/footer.html' %}'"></div>
</body>
</html>
